---
title: "Комментарии в Hugo"
date: 2018-12-12T22:46:23+05:00
draft: false
tags: ["Hugo", "комментарии"]
---
Не прошло и полгода. Я решил добавить в блог комментарии. Без них все выглядит как-то чересчур стерильно. Однако, поскольку блог крутится на Hugo, задача добавления динамического контента в статический сайт довольно непростая. Есть два очевидных варианта:

1. Disqus
2. Staticman

Однако, если с ними познакомиться поближе, все окажется совсем неочевидно.

<!--more-->

## Disqus

Hugo  дружит с ним из коробки. Достаточно создать аккаунт, включить его поддержку в config-файле, и все заиграет. Что же даст мне Disqus?

* Удобную систему комментариев с ответами, уведомлениями, рейтингами и так далее.
* Возможность для пользователей использовать логины любых социальных сетей.
* Мощную панель управления сообществом.
* И даже возможность монетизировать свой блог!

И это, конечно, не все.

* **РЕКЛАМА**. Реклама прямо посреди комментариев (о да, я даже могу управлять, где она будет, в начале, посреди или в конце ленты комментариев).
* **СЛЕЖЕНИЕ**. Disqus притащит в ваш уютный бложик такую орду трекеров всех мастей, что маленький Ghostery взвоет.

Данные в обмен на удобство? Мне такую цену платить не хочется. И не только мне. Например:

[Why I killed Disqus Commenting on my site?](https://chrislema.com/killed-disqus-commenting/)

[Disqus: Is Your Data Worth Trading for Convenience? ](https://replyable.com/2017/03/disqus-is-your-data-worth-trading-for-convenience/)

[Visiting a site that uses Disqus comments when not logged in sends the URL to Facebook](https://blog.dantup.com/2017/01/visiting-a-site-that-uses-disqus-comments-when-not-logged-in-sends-the-url-to-facebook/)

Это просто случайная выборка с первой страницы ленивого поиска. Так что нет, спасибо, рассмотрим другой вариант.

## Staticman

[Staticman](https://staticman.net/) специально создан для статичных сайтов.

* Не хранит ваши данные.
* Нет никакой рекламы.
* Нет слежения.
* Открытый исходный код.

Для работы Staticman репозиторий с блогом должен лежать на Github. Его подключение к Gitlab возможно, но пока, к сожалению, связано со страшными самодельными костылями. Вы просто добавляете бот <code>staticmanapp</code> как Contributor, а затем делаете простой GET-запрос к его API, чтобы подтвердить приглашение, и все - он работает так, как вы хотите, и там, где вы хотите. Есть прекрасные туториалы по подкючению его к Hugo, например, [вот](https://gohugohq.com/howto/staticman-hugo-comment-system/).

Есть только одна проблема. **Он не работает.** Его issues на Github забиты однотипными жалобами на невозможность подключить его как Contributor. Оказывается, дело связано [вот с чем](https://github.com/eduardoboucas/staticman/issues/243). Ввиду того, что Staticman работает как бот, для него действует стандартная квота на 5000 обращений к API в час. Видимо, он действительно популярен, так как эта квота сжирается практически моментально. Решение есть, и оно заключается в переработке его как приложения, которое можно просто установить себе в Github. Увы, пока с этим все туманно. Реакции разработчка на вскрытую проблему пока нет.

Итак, очевидные варианты кончились, и я начал искать неочевидные.

## Неочевидное

Моя альтернатива - [Commento](https://commento.io/).

* Необычайно простое подключение.
* Нет рекламы.
* Нет трекеров.
* Возможность логина через Facebook и Google.
* Открытый исходный код.

К сожалению:

* Очень бедная панель управления.
* Сервис хранит данные (решается установкой на свой сервер).

Комментарии выглядят вполне аккуратно и опрятно. Встроенный антиспам и включаемая предварительная модерация позволяют содержать комментарии в чистоте. Можно подключать свой CSS для ленты комментариев. В общем, мне понравилось. Сервис очевидно позиционирует себя как альтернатива прожорливому до пользовательских данных Disqus и заслуживает всяческого внимания. Ему ой как есть куда расти, и я надеюсь, что ему это удастся.
