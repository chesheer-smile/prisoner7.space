---
title: "Linux Mint 19 и Timeshift"
date: 2018-07-14T13:20:14+05:00
draft: false
tags: ['Linux Mint', 'Timeshift', 'Linux']
---

Некоторое время назад вышла очередная, девятнадцатая версия Linux Mint под красивым кодовым названием Tara. Одной из киллер-фич (по мнению создателей дистрибутива) является "новшество" под названием Timeshift. В сущности, это просто система создания снапшотов, которая работает либо через rsync (на любой файловой системе), либо через использование нативных снапшотов btrfs (соответственно, только на btrfs). Разработчики придают такое большое значение этой возможности, что даже вынесли ее настройку первым пунктом на экран приветствия при первой загрузке системы. Я решил распробовать эту новинку, и из этого получилась очень короткая и грустная история.

<!--more-->

Естественно, я решил ставить систему на btrfs. Было интересно посмотреть, как она будет с ней работать. Само собой, btrfs должен быть зашифрован, а поскольку из коробки он этого не умеет, то, очевидно, раздел с btrfs должен быть упакован в LUKS.

Конечно же, с первых шагов меня шлепнули мордой в прелести Ubiquity, родного установщика Ubuntu и Mint, который унаследовал все уродство стандартного установщика Debian. Само собой, работать с зашифрованными томами он толком не умеет, а о том, чтобы быстро и удобно установить в них систему, и речи быть не может.

Установщику пришлось помогать руками, а после установки монтировать установленную систему, делать туда chroot, собирать initramfs и ковырять <code>/etc/default/grub</code>, чтобы установленная система загрузилась. Но в результате я получил рабочую систему, установленную на btrfs на зашифрованном LUKS-разделе. Победа вместо обеда.

И вот, наконец, я добрался до Timeshift, который любезно спросил, как ему снапшотить систему - через rsync или через снапшоты btrfs? Тут моей сказочке настал внезапный и скоропостижный конец - Timeshift (внимание) **НЕ УМЕЕТ** делать снапшоты через btrfs, если оный btrfs стоит на зашифрованном разделе. Он просто не видит никаких btrfs разделов. При этом в режиме rsync он раздел с btrfs **ВИДИТ** без всяких проблем и спокойно с ним работает.

Не вынеся несовершенства мира, стер я Linux Mint к черту. Жаль только, что такое красивое имя Tara испортили.